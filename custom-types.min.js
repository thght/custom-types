(function(){var t,e,r={}.hasOwnProperty;e=require("types.js"),t=function(t,r){var i;if(e.isObject(t)&&e.isString(r))return i=t[r],delete t[r],i},e.create=function(i){var n,o,s,f;i=e.forceObject(i),o=e.forceString(t(i,"id")),n=function(){class t{static getModel(){var e,i,n,o;e={},n=t._model;for(i in n)r.call(n,i)&&(o=n[i],e[i]=o);return e}static exists(e){return t._model.hasOwnProperty(e)}static showError(t){return console.log(o+": error! - "+e.forceString(t))}static isValidType(r,i){return e.typeof(i)===t._types[r]||t.showError('type mismatch for key: "'+r+'", the given value is of type: '+e.typeof(i)+", but it should be of type: "+t._types[r]+"!")}static _addGetSet(e,r){if(!this[e]&&t.isValidType(e,r))return Object.defineProperty(this,e,{set:t=>this.SET(e,t),get:()=>this._keys[e]})}constructor(r){var i,n,o;r=e.forceObject(r),this._keys={},this.LOCKED=[],n=e.forceObject(t._model);for(i in n)o=n[i],t._addGetSet.call(this,i,o),r.hasOwnProperty(i)&&t.isValidType(i,r[i])?this.SET(i,r[i]):this._keys[i]=o}IS_LOCKED(t){return~this.LOCKED.indexOf(t)}LOCK(...r){var i,n,o,s,f;for(f=[],i=0,o=(s=e.intoArray(r)).length;i<o;i++)n=s[i],t.exists(n)?f.push(this.LOCKED.push(n)):f.push(void 0);return f}UNLOCK(...r){var i,n,o,s,f,u;for(u=[],i=0,s=(f=e.intoArray(r)).length;i<s;i++)o=f[i],t.exists(o)?(n=this.LOCKED.indexOf(o),u.push(this.LOCKED.splice(n,1))):u.push(void 0);return u}SET(i,n){var o,s,f,u;if(u=((e,r)=>{if(!t.exists(e))return t.showError('cannot set value for key: "'+e+"\", as it doesn't exist in the model!");if(this.IS_LOCKED(e))return t.showError('cannot set field "'+e+'" to: "'+r+'", "'+e+'" is locked!');if(t.isValidType(e,r))return this._keys[e]=r}),e.isObject(i)){s=e.forceObject(i),f=[];for(o in s)r.call(s,o)&&(n=s[o],f.push(u(o,n)));return f}if(e.isString(i))return u(i,n)}}return t.id=o,t._types={},t._model={},t}();for(s in i)f=i[s],n._types[s]=e.typeof(f),n._model[s]=f;return n},module.exports=e}).call(this);