(function(){var t,e,r={}.hasOwnProperty,n=[].indexOf;e=require("types.js"),t=["SET","GET","LOCK","UNLOCK","IS_LOCKED","LOCKED","_KEYS"],e.create=function(o,i){var s,f,c;i=e.isString(o)?e.forceObject(i):e.forceObject(o),o=e.forceString(o),s=function(){class t{static getModel(){var e,n,o,i;e={},o=t._model;for(n in o)r.call(o,n)&&(i=o[n],e[n]=i);return e}static has(e){return t._model.hasOwnProperty(e)}static showError(t){return console.log(o+": error! - "+e.forceString(t))}static _isValidType(r,n){return e.typeof(n)===t._types[r]||t.showError(" cannot apply the "+e.typeof(n)+" type value: "+n+' to field "'+r+'", the value should be of type '+t._types[r])}static _addGetSet(t){if(!this[t])return Object.defineProperty(this,t,{set:e=>this.SET(t,e),get:()=>this._KEYS[t]})}constructor(r){var n,o,i;r=e.forceObject(r),this._KEYS={},this.LOCKED=[],o=e.forceObject(t._model);for(n in o)i=o[n],t._addGetSet.call(this,n,i),r.hasOwnProperty(n)&&t._isValidType(n,r[n])?this.SET(n,r[n]):this._KEYS[n]=i}IS_LOCKED(t){return!!~this.LOCKED.indexOf(t)}LOCK(...r){var n,o,i,s,f;for(f=[],n=0,i=(s=e.intoArray(r)).length;n<i;n++)o=s[n],t.has(o)?f.push(this.LOCKED.push(o)):f.push(void 0);return f}UNLOCK(...r){var n,o,i,s,f,c;for(c=[],n=0,s=(f=e.intoArray(r)).length;n<s;n++)i=f[n],t.has(i)?(o=this.LOCKED.indexOf(i),c.push(this.LOCKED.splice(o,1))):c.push(void 0);return c}GET(...r){var n,o,i,s,f;for(s={},r.length<1&&(r=Object.keys(this._KEYS)),n=0,i=(f=e.intoArray(r)).length;n<i;n++)o=f[n],t.has(o)?s[o]=this._KEYS[o]:t.showError("could not get: "+o+", it doesn't exist in the model!");return s}SET(n,o){var i,s,f,c;if(c=((e,r)=>{if(!t.has(e))return t.showError('cannot set value for key: "'+e+"\", it doesn't exist in the model!");if(this.IS_LOCKED(e))return t.showError('cannot set field "'+e+'" to: "'+r+'", "'+e+'" is locked!');if(t._isValidType(e,r))return this._KEYS[e]=r}),e.isObject(n)){s=e.forceObject(n),f=[];for(i in s)r.call(s,i)&&(o=s[i],f.push(c(i,o)));return f}if(e.isString(n))return c(n,o)}}return t.id=o,t._types={},t._model={},t}();for(f in i)r.call(i,f)&&(c=i[f],n.call(t,f)>=0?s.showError('"'+f+'" is a reserved word and cannot be used in a model'):(s._types[f]=e.typeof(c),s._model[f]=c));return s},module.exports=e}).call(this);